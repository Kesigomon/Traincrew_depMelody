# UTテスト項目書

## 1. テスト概要

### 1.1 目的
Traincrew発車メロディー連動システム (Traincrew_depMelody) の各コンポーネントが正しく動作することを単体テストレベルで検証する。

### 1.2 テスト対象範囲
- Repository層: TrackRepository, FFmpegRepository, TraincrewRepository, AudioPlayerRepository
- Service層: MainService, AutoModeService, MelodyPathService
- Presentation層: MainWindow（一部）

### 1.3 テストフレームワーク
- xUnit / NUnit / MSTest
- Moq (モックライブラリ)

---

## 2. Repository層のテスト項目

### 2.1 TrackRepository

#### 2.1.1 CSVファイル読み込みテスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| TR-001 | 正常なCSV読み込み | Track.csvが正常に読み込めることを確認 | 正常なTrack.csv | CSVの全レコードがDictionaryに格納される |
| TR-002 | 駅名・番線の取得 | 軌道回路セットから駅名・番線を取得 | `{"TH76_5LAT"}` | `("館浜", 1)` |
| TR-003 | 複数軌道回路の取得 | 複数軌道回路から駅名・番線を取得 | `{"TC1", "TC2"}` | 対応する駅名・番線のタプル |
| TR-004 | 存在しない軌道回路 | 存在しない軌道回路セットで検索 | `{"INVALID"}` | null または例外 |
| TR-005 | 空の軌道回路セット | 空のセットで検索 | `{}` | null または例外 |
| TR-006 | "なし"の除外 | CSV内の"なし"が除外される | 対応軌道回路に"なし"を含むレコード | "なし"は軌道回路セットに含まれない |
| TR-007 | 空文字列の除外 | CSV内の空文字列が除外される | 対応軌道回路に空文字列を含むレコード | 空文字列は軌道回路セットに含まれない |
| TR-008 | CSVファイル不存在 | CSVファイルが存在しない場合 | 不存在のパス | 例外がスローされる |

#### 2.1.2 データ構造テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| TR-101 | HashSetの比較 | 軌道回路セットが正しく比較される | 同じ要素を含む異なるHashSet | 同一のキーとして認識される |
| TR-102 | 順序非依存の比較 | 要素の順序が異なるセット | `{"A", "B"}` と `{"B", "A"}` | 同一のキーとして認識される |

---

### 2.2 FFmpegRepository

#### 2.2.1 音声長さ取得テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| FF-001 | 正常な音声ファイル | MP3ファイルの長さを取得 | 有効なMP3ファイルURI | 正しい秒数（TotalSeconds） |
| FF-002 | 正常な音声ファイル（WAV） | WAVファイルの長さを取得 | 有効なWAVファイルURI | 正しい秒数（TotalSeconds） |
| FF-003 | ファイル不存在 | 存在しないファイル | 不存在のURI | 例外スロー または 0.0 |
| FF-004 | 無効な音声ファイル | 音声ファイルでないファイル | テキストファイル等 | 例外スロー または 0.0 |
| FF-005 | FFmpeg未インストール | FFmpegが存在しない環境 | 任意の音声ファイル | 例外スロー |
| FF-006 | 長時間の音声 | 長時間の音声ファイル | 10分以上の音声ファイル | 正しい秒数が返る |
| FF-007 | 極短時間の音声 | 極短時間の音声ファイル | 1秒未満の音声ファイル | 正しい秒数が返る（小数点以下も） |

#### 2.2.2 正規表現パーステスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| FF-101 | Duration抽出 | FFmpegの出力から時間を抽出 | `Duration: 00:01:23.45` | 83.45秒 |
| FF-102 | Duration抽出（時間なし） | 分秒のみ | `Duration: 00:00:05.00` | 5.0秒 |
| FF-103 | Duration抽出失敗 | Durationが含まれない出力 | 不正な出力文字列 | 0.0 または例外 |

---

### 2.3 TraincrewRepository

#### 2.3.1 ゲーム状態取得テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| TC-001 | GameScreen取得 | GameScreenが取得できる | モックDLL | 正しいGameScreen値 |
| TC-002 | TrainState取得 | TrainStateが取得できる | モックDLL | TrainStateオブジェクト |
| TC-003 | CrewType取得 | 乗務員種別が取得できる | モックDLL | Driver または Conductor |
| TC-004 | SignalInfo取得 | 信号情報が取得できる | モックDLL | SignalInfoリスト |
| TC-005 | ゲーム未起動時 | ゲーム未起動時の動作 | GameScreen.NotRunningGame | TrainStateがnull |

#### 2.3.2 WebSocket通信テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| TC-101 | WebSocket接続成功 | WebSocketが正常に接続できる | 正常なサーバー | 接続成功 |
| TC-102 | WebSocket接続失敗 | サーバーが応答しない場合 | 応答なしサーバー | WebSocketを再生成して終了 |
| TC-103 | データリクエスト送信 | JSONリクエストが正しく送信される | DataRequestコマンド | 正しいJSON形式で送信 |
| TC-104 | データ受信 | 軌道回路情報を受信できる | モックサーバー応答 | TrackCircuitDataリストが取得される |
| TC-105 | 自列車のみ抽出 | 自列車在線の軌道回路のみ抽出 | 複数列車の軌道回路データ | 自列車番号の軌道回路のみ |

#### 2.3.3 軌道回路セット取得テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| TC-201 | 軌道回路セット取得 | 在線中の軌道回路セットを取得 | WebSocketからの軌道回路データ | HashSet<string>形式で返る |
| TC-202 | 空の軌道回路セット | 在線なし | 空のtrackCircuitList | 空のHashSet |

---

### 2.4 AudioPlayerRepository

#### 2.4.1 メロディー再生テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| AP-001 | PlayOn正常再生 | メロディーが再生される | 有効な音声ファイルURI | 再生開始される |
| AP-002 | ループ再生 | MediaEndedイベントでループする | 音声ファイル再生完了 | 再生位置が0に戻り再度Play |
| AP-003 | 重複PlayOn呼び出し | 再生中に再度PlayOnを呼ぶ | 再生中に新しいURI | 既存再生を停止して新規再生 |
| AP-004 | 無効なファイルパス | 存在しないファイル | 不存在のURI | 例外スロー |

#### 2.4.2 ドア閉め案内再生テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| AP-101 | PlayOff正常再生 | ドア閉め案内が再生される | 有効な音声ファイルURI | 1秒待機後に再生開始 |
| AP-102 | メロディー停止 | PlayOff時にメロディーが停止する | PlayOn再生中にPlayOff | メロディーが停止・クローズされる |
| AP-103 | 1回のみ再生 | MediaEndedイベントで停止 | 音声ファイル再生完了 | 停止してクローズ（ループしない） |
| AP-104 | 1秒待機 | PlayOff呼び出しから1秒待機 | PlayOff呼び出し | 1秒後に再生開始 |

#### 2.4.3 一時停止・再開テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| AP-201 | Pause動作 | メロディーが一時停止する | Pause()呼び出し | MediaPlayer.Pause()が呼ばれる |
| AP-202 | Resume動作 | メロディーが再開する | Resume()呼び出し | MediaPlayer.Play()が呼ばれる |
| AP-203 | 停止中のPause | 停止中にPauseを呼ぶ | 再生していない状態でPause | 例外なし |

#### 2.4.4 リセットテスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| AP-301 | Reset動作 | 全音声が停止・クローズされる | Reset()呼び出し | 両MediaPlayerが停止・クローズ |

---

## 3. Service層のテスト項目

### 3.1 MelodyPathService

#### 3.1.1 メロディーパス取得テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MP-001 | 正常なパス取得 | 駅名・番線からパスを取得 | `("館浜", 1)`, isUp=false | `./sound/館浜_1.wav` |
| MP-002 | デフォルトメロディー | 存在しない駅名 | `("存在しない駅", 1)` | `./sound/default.wav` |
| MP-003 | 上り/下りによる変化 | isUpの違い | 同じ駅・番線でisUp=true/false | 同じパス（メロディーは上下で同一） |

#### 3.1.2 ドア閉め案内パス取得テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MP-101 | 下りパス | 下り方向のパス | trackNumber=1, isUp=false | `./sound/doorClosing_1.wav` |
| MP-102 | 上りパス | 上り方向のパス | trackNumber=1, isUp=true | `./sound/doorClosing_1.wav` |

#### 3.1.3 館浜駅の特殊処理テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MP-201 | 館浜1番線・特急 | 特急の場合、番線そのまま | `("館浜", 1)`, 列車種別=特急 | 番線=1 |
| MP-202 | 館浜1番線・普通 | 普通の場合、番線+1 | `("館浜", 1)`, 列車種別=普通 | 番線=2 |
| MP-203 | 館浜2番線・特急 | 特急の場合、番線そのまま | `("館浜", 2)`, 列車種別=特急 | 番線=2 |
| MP-204 | 館浜2番線・普通 | 普通の場合、番線+1 | `("館浜", 2)`, 列車種別=普通 | 番線=3 |
| MP-205 | 館浜3番線以降 | 3番線以降は番線+1 | `("館浜", 3)` | 番線=4 |

#### 3.1.4 GetAudioPath総合テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MP-301 | ON時のパス | isMelodyPlaying=false→true | trackInfo, isMelodyPlaying=false | メロディーパス |
| MP-302 | OFF時のパス | isMelodyPlaying=true→false | trackInfo, isMelodyPlaying=true | ドア閉め案内パス |

---

### 3.2 AutoModeService

#### 3.2.1 タイミング計算テスト（ON押下）

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| AM-001 | 到着1秒後 | 到着時刻+1秒でON | 到着時刻=0秒、現在時刻=1秒 | ButtonState.On |
| AM-002 | 信号開通0.5秒後 | 信号開通+0.5秒でON | 信号開通=0秒、現在時刻=0.5秒 | ButtonState.On |
| AM-003 | 発車時刻逆算 | 発車時刻-メロディー時間-ドア閉め時間-マージン | 発車時刻=100秒、メロディー=20秒、ドア閉め=5秒、マージン=8.5秒 | 現在時刻=66.5秒でON |
| AM-004 | 最大値の選択 | 3つの条件の最大値 | 上記3つの条件すべて | 最も遅いタイミングでON |
| AM-005 | 50000系マージン | 50000系の場合16.5秒マージン | 車両形式="50000" | マージン=16.5秒 |
| AM-006 | その他車両マージン | その他車両の場合8.5秒マージン | 車両形式="E233" | マージン=8.5秒 |

#### 3.2.2 タイミング計算テスト（OFF押下）

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| AM-101 | ON後1秒 | ON押下+1秒でOFF | ON押下時刻=0秒、現在時刻=1秒 | ButtonState.Off |
| AM-102 | 到着12秒後 | 到着時刻+12秒でOFF（最低ドア開放時間） | 到着時刻=0秒、現在時刻=12秒 | ButtonState.Off |
| AM-103 | 発車時刻逆算 | 発車時刻-ドア閉め時間-マージン | 発車時刻=100秒、ドア閉め=5秒、マージン=8.5秒 | 現在時刻=86.5秒でOFF |
| AM-104 | 最大値の選択 | 3つの条件の最大値 | 上記3つの条件すべて | 最も遅いタイミングでOFF |

#### 3.2.3 状態変化検知テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| AM-201 | ドア開扉検知 | AllClose: true→false | TrainState.AllClose変化 | 到着時刻記録 |
| AM-202 | 信号開通検知 | 信号: R→G | SignalInfo変化 | 信号開通時刻記録 |
| AM-203 | 番線変化検知 | 番線変化時にメロディー長さ再取得 | 番線変化 | SetMelodyDuration()呼び出し |

#### 3.2.4 強制OFF条件テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| AM-301 | 閉扉時OFF | ドア閉扉で強制OFF | AllClose=true | ButtonState.Off |
| AM-302 | 信号閉鎖時OFF | 信号閉鎖で強制OFF | 信号現示=R | ButtonState.Off |

#### 3.2.5 Resetテスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| AM-401 | Reset動作 | 全状態がリセットされる | Reset()呼び出し | 全フラグ・時刻がリセット |

---

### 3.3 MainService

#### 3.3.1 ゲーム状態変化検知テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MS-001 | ゲーム開始検知 | NotRunningGame→MainGame | GameScreen変化 | OnStartGame()呼び出し |
| MS-002 | ゲーム終了検知 | MainGame→NotRunningGame | GameScreen変化 | OnStopGame()呼び出し |
| MS-003 | 一時停止検知 | MainGame→MainGame_Pause | GameScreen変化 | OnPaused()呼び出し |
| MS-004 | 一時停止解除検知 | MainGame_Pause→MainGame | GameScreen変化 | OnResumed()呼び出し |

#### 3.3.2 乗務開始・終了処理テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MS-101 | 運転士モード開始 | 運転士で乗務開始 | CrewType.Driver | 自動モードフラグON |
| MS-102 | 車掌モード開始 | 車掌で乗務開始 | CrewType.Conductor | 自動モードフラグOFF |
| MS-103 | 乗務終了時Reset | 乗務終了でリセット | OnStopGame()呼び出し | AudioPlayerRepository.Reset() |
| MS-104 | 乗務終了時ボタン無効 | 乗務終了でボタン無効化 | OnStopGame()呼び出し | SetButtonIsEnabled(false) |

#### 3.3.3 ホームトラック判定テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MS-201 | ホームトラック在線 | ホームトラック上 | 駅名・番線が取得できる | ボタン有効化（手動モード時） |
| MS-202 | ホームトラック離脱 | ホームトラック外 | 駅名・番線がnull | ボタン無効化 |
| MS-203 | 自動モード時無効 | 自動モード時はボタン無効 | 自動モードON | SetButtonIsEnabled(false) |

#### 3.3.4 ボタン状態取得テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MS-301 | 手動モード状態取得 | 手動モード時はUIから取得 | 自動モードOFF | MainWindow.GetButtonState()呼び出し |
| MS-302 | 自動モード状態取得 | 自動モード時はAutoModeServiceから取得 | 自動モードON | AutoModeService.GetButtonState()呼び出し |

#### 3.3.5 メロディー再生制御テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MS-401 | ON時メロディー再生 | OFF→ONでメロディー再生 | ButtonState.On、_isMelodyPlaying=false | AudioPlayerRepository.PlayOn()呼び出し |
| MS-402 | OFF時ドア閉め再生 | ON→OFFでドア閉め案内再生 | ButtonState.Off、_isMelodyPlaying=true | AudioPlayerRepository.PlayOff()呼び出し |
| MS-403 | 状態変化なし | NotChangedで何もしない | ButtonState.NotChanged | 音声処理なし |
| MS-404 | 同状態で変化なし | ON中にONでも何もしない | ButtonState.On、_isMelodyPlaying=true | 音声処理なし |
| MS-405 | 同状態で変化なし | OFF中にOFFでも何もしない | ButtonState.Off、_isMelodyPlaying=false | 音声処理なし |

#### 3.3.6 一時停止処理テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MS-501 | 一時停止時Pause | Pause時に音声一時停止 | OnPaused()呼び出し | AudioPlayerRepository.Pause()呼び出し |
| MS-502 | 一時停止時ボタン無効 | Pause時にボタン無効化 | OnPaused()呼び出し | SetButtonIsEnabled(false) |
| MS-503 | 一時停止解除時Resume | Resume時に音声再開 | OnResumed()呼び出し | AudioPlayerRepository.Resume()呼び出し |

---

## 4. Presentation層のテスト項目

### 4.1 MainWindow

#### 4.1.1 ボタン押下テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MW-001 | ONボタン押下 | ONボタンを押す | ONボタンクリック | _buttonState = ButtonState.On |
| MW-002 | OFFボタン押下 | OFFボタンを押す | OFFボタンクリック | _buttonState = ButtonState.Off |
| MW-003 | 連続ONボタン押下 | ONボタンを連続で押す | ONボタン連続クリック | 1回目のみOn、2回目以降はNotChanged |
| MW-004 | 連続OFFボタン押下 | OFFボタンを連続で押す | OFFボタン連続クリック | 1回目のみOff、2回目以降はNotChanged |
| MW-005 | ON→OFF遷移 | ONからOFFに切り替え | ONボタン→OFFボタン | On→Off遷移 |

#### 4.1.2 ボタン有効/無効テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MW-101 | ボタン有効化 | ボタンを有効にする | SetButtonIsEnabled(true) | 両ボタンがIsEnabled=true |
| MW-102 | ボタン無効化 | ボタンを無効にする | SetButtonIsEnabled(false) | 両ボタンがIsEnabled=false |
| MW-103 | 無効時のボタン押下 | 無効時にボタンを押す | 無効状態でクリック | _buttonStateはNotChangedのまま |

#### 4.1.3 最前面表示テスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MW-201 | 最前面表示ON | 最前面表示を有効にする | SetTopMost(true) | Topmost=true |
| MW-202 | 最前面表示OFF | 最前面表示を無効にする | SetTopMost(false) | Topmost=false |

#### 4.1.4 メインループテスト

| テストID | テスト項目 | テスト内容 | 入力 | 期待結果 |
|---------|----------|----------|------|---------|
| MW-301 | Tick周期 | 16ms周期でTick実行 | RunAsync()起動 | 約60FPSでMainService.Tick()呼び出し |
| MW-302 | ButtonState自動リセット | Tick後にNotChangedにリセット | Tick実行 | _buttonState=NotChangedに戻る |
| MW-303 | キャンセル動作 | CancellationTokenでループ終了 | _cancellationTokenSource.Cancel() | ループ終了 |

---

## 5. 統合テスト項目（参考）

### 5.1 エンドツーエンドシナリオ

| テストID | テスト項目 | テスト内容 | 期待結果 |
|---------|----------|----------|---------|
| IT-001 | 手動モード・ON/OFF操作 | UIボタンでON→OFF操作 | メロディー再生→停止→ドア閉め案内再生 |
| IT-002 | 自動モード・発車シーケンス | 運転士モードで駅到着→発車 | 自動でメロディー再生→ドア閉め案内再生 |
| IT-003 | 一時停止・再開 | ゲーム一時停止→再開 | 音声一時停止→再開 |
| IT-004 | 駅変更時のメロディー変化 | 駅A→駅Bへ移動 | 駅Aのメロディー→駅Bのメロディー |
| IT-005 | 乗務終了・再開始 | 乗務終了→再開始 | 音声リセット→再度正常動作 |

---

## 6. 非機能テスト項目（参考）

### 6.1 性能テスト

| テストID | テスト項目 | テスト内容 | 期待結果 |
|---------|----------|----------|---------|
| NF-001 | Tick処理時間 | Tick1回の処理時間 | 16ms以内 |
| NF-002 | WebSocket応答時間 | WebSocket通信の応答時間 | 100ms以内 |
| NF-003 | 音声再生遅延 | ボタン押下から音声再生までの遅延 | 1秒以内 |

### 6.2 リソーステスト

| テストID | テスト項目 | テスト内容 | 期待結果 |
|---------|----------|----------|---------|
| NF-101 | メモリリーク | 長時間実行時のメモリ使用量 | メモリリークなし |
| NF-102 | CPU使用率 | 通常動作時のCPU使用率 | 10%以下（目安） |

---

## 7. テスト実施時の注意事項

### 7.1 モックの使用
- TrainCrewInput.dllはモック化が必須
- WebSocket通信はモックサーバーを使用
- MediaPlayerはモック化してUIスレッド依存を回避

### 7.2 ファイル依存
- テスト用のTrack.csvを準備
- テスト用の音声ファイル（ダミーでも可）を準備
- FFmpegのモック化を検討

### 7.3 非同期処理
- Task.Delay()を含むテストは適切に待機
- WebSocket通信の非同期処理を考慮
- Dispatcher依存処理はモック化または統合テストで実施

### 7.4 テストデータ
- 実際のTraincrewゲームデータ形式に準拠
- 境界値テストを実施（極端な時刻、長時間音声など）

---

## 8. テスト実装優先度

### 高優先度
1. TrackRepository（CSVファイル読み込み）
2. MelodyPathService（パス決定ロジック）
3. AutoModeService（タイミング計算）
4. MainService（状態変化検知、メロディー再生制御）

### 中優先度
5. FFmpegRepository（音声長さ取得）
6. AudioPlayerRepository（再生制御）
7. MainWindow（ボタン押下、状態管理）

### 低優先度
8. TraincrewRepository（WebSocket通信はモック化が複雑）
9. 統合テスト
10. 非機能テスト

---

## 9. テスト環境構築

### 9.1 テストプロジェクト構成
```
Traincrew_depMelody.Tests/
├─ Repository/
│  ├─ TrackRepositoryTests.cs
│  ├─ FFmpegRepositoryTests.cs
│  ├─ TraincrewRepositoryTests.cs
│  └─ AudioPlayerRepositoryTests.cs
├─ Service/
│  ├─ MelodyPathServiceTests.cs
│  ├─ AutoModeServiceTests.cs
│  └─ MainServiceTests.cs
├─ Presentation/
│  └─ MainWindowTests.cs
├─ TestData/
│  ├─ Track_Test.csv
│  └─ DummyAudio/
│     ├─ test_melody.mp3
│     └─ test_doorClosing.mp3
└─ Mocks/
   ├─ MockTrainCrewInput.cs
   ├─ MockWebSocketServer.cs
   └─ MockMediaPlayer.cs
```

### 9.2 必要なNuGetパッケージ
- xUnit / NUnit / MSTest
- Moq
- FluentAssertions（アサーションライブラリ）
- Microsoft.Extensions.DependencyInjection（DI）

---

## 10. まとめ

本テスト項目書に基づき、以下のテストを実施する:
- **Repository層**: データアクセス・外部連携の正常性検証
- **Service層**: ビジネスロジック・タイミング計算の正確性検証
- **Presentation層**: UI操作・状態管理の正常性検証

テストの実装により、以下の効果を期待:
- バグの早期発見・修正
- リファクタリング時の安全性向上
- 仕様変更時の影響範囲の明確化
- コード品質の向上
